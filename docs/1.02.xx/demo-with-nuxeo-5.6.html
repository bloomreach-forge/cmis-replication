<!DOCTYPE html>
    <!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-11-09 
 | Rendered using BloomReach Forge Maven Skin 3.0.1 based on Apache Maven Fluido Skin
-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                  <meta name="Date-Revision-yyyymmdd" content="20181109" />
              <meta http-equiv="Content-Language" content="en" />
      <title>CMIS Replication Module &#x2013; Demo with Nuxeo DM Server 5.6</title>
  <link rel="stylesheet" href="../css/forge-maven-skin-syntaxhighlighter-3.0.1.min.css"/>
  <link rel="stylesheet" href="../css/forge-maven-skin-3.0.1.min.css"/>
  <link rel="stylesheet" href="../css/site.css" />
  <link rel="stylesheet" href="../css/print.css" media="print" />
  <link rel="icon" type="image/png" href="../images/skin/logo_64.png" sizes="64x64">

  
  <script type="text/javascript" src="../js/forge-maven-skin-syntaxhighlighter-3.0.1.min.js"></script>
  <script type="text/javascript" src="../js/forge-maven-skin-3.0.1.min.js"></script>

    </head>
<body class="topBarDisabled">
                        <a href="https://github.com/bloomreach-forge/cmis-replication">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
         src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
         alt="Fork me on GitHub">
  </a>
          <div class="container-fluid">
  <div id="banner">
    <div id="logo">
      <a href="http://www.github.com/bloomreach-forge">
        <img src="../images/skin/logo.png" alt="BloomReach Forge Logo" />
      </a>
    </div>
    <div class="pull-left">              <div id="bannerLeft">    <h1>CMIS Replication</h1>
    </div>
              </div>
    <div class="pull-right"></div>
    <div class="clear"><hr/></div>
  </div>

  <div id="breadcrumbs">
    <div class="links">
      <a href="https://developers.bloomreach.com">developers.bloomreach.com</a>
      <a href="https://www.onehippo.org">onehippo.org</a>
    </div>
    <ul class="breadcrumb">
    
  <li id="publishDate">published: 2018-11-09  
  </li>
  
        
            </ul>
    <div class="clear"><hr/></div>
  </div>
<div class="row-fluid">
  <div id="leftColumn" class="span2">
    <div class="well sidebar-nav">
    
    <ul class="nav nav-list">
            <li class="nav-header">Home</li>
              <li>  <a href="../index.html" title="Home">  <span class="none"></span>  Home</a>  </li>
        <li>  <a href="../release-notes.html" title="Release Notes">  <span class="none"></span>  Release Notes</a>  </li>
                  <li class="nav-header">Usage</li>
              <li>  <a href="../install.html" title="Installation">  <span class="none"></span>  Installation</a>  </li>
        <li>  <a href="../demo-with-nuxeo-6.0.html" title="Demo with Nuxeo DM Server 6.0">  <span class="none"></span>  Demo with Nuxeo DM Server 6.0</a>  </li>
        <li>  <a href="../build-from-source.html" title="Build from source">  <span class="none"></span>  Build from source</a>  </li>
                  <li class="nav-header">1.02.xx Documentation</li>
              <li>  <a href="../1.02.xx/index.html" title="Home">  <span class="none"></span>  Home</a>  </li>
        <li>  <a href="../1.02.xx/install.html" title="Installation">  <span class="none"></span>  Installation</a>  </li>
        <li class="active">  <a href="#"><span class="none"></span>Demo with Nuxeo DM Server 5.4</a>
  </li>
                  <li class="nav-header">1.01.xx Documentation (Deprecated)</li>
              <li>  <a href="../1.01.xx/index.html" title="Home">  <span class="none"></span>  Home</a>  </li>
        <li>  <a href="../1.01.xx/install.html" title="Installation">  <span class="none"></span>  Installation</a>  </li>
        <li>  <a href="../1.01.xx/demo-with-nuxeo-5.4.html" title="Demo with Nuxeo DM Server 5.4">  <span class="none"></span>  Demo with Nuxeo DM Server 5.4</a>  </li>
                  <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                            <li>  <a href="../project-info.html" title="Project Information">  <span class="icon-chevron-right"></span>  Project Information</a>  </li>
                                                                                                  <li>  <a href="../project-reports.html" title="Project Reports">  <span class="icon-chevron-right"></span>  Project Reports</a>  </li>
        </ul>
    
          <hr />
      <div id="poweredBy">
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
              <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">  <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />  </a>
          </div>
    </div>
  </div>
  <div id="bodyColumn"  class="span10" >
    
  
    <div class="section">
<h2><a name="Demo_with_Nuxeo_DM_Server_5.6"></a>Demo with Nuxeo DM Server 5.6</h2>

      
<div class="section">
<h3><a name="Introduction"></a>Introduction</h3>
        
<p>In this demo, we will use Nuxeo DM Server as a CMIS Repository and show how to integrate it with Hippo Repository.</p>
      </div>

      
<div class="section">
<h3><a name="Install_Nexeo_DM_Server"></a>Install Nexeo DM Server</h3>
        
<ol style="list-style-type: decimal">
          
<li>
            Download Nuxeo Document Management Server at <a class="externalLink" href="http://www.nuxeo.com/" target="_blank">http://www.nuxeo.com/</a>.
          </li>
          
<li>
            Uncompress or install the package (e.g, ./nuxeo-cap-5.6-tomcat/).
          </li>
          
<li>
            Change the default Tomcat port numbers of Nuxeo DM Server by adding the following properties in the bin/nuxeo.conf file:
            <br />
            (This will be more convenient when you are running Hippo CMS on the same machine because Hippo CMS also uses 80** port numbers by default.)
            
<div class="source"><pre>
nuxeo.server.http.port=18080
nuxeo.server.tomcat_admin.port=18005
nuxeo.server.ajp.port=18009
            </pre></div>
          </li>
          
<li>
            Start Nuxeo DM Server like the following example in a command line console:
            <br />
            
<div class="source"><pre>
$ cd ./nuxeo-cap-5.6-tomcat/bin
$ ./nuxeoctl console
            </pre></div>
          </li>
          
<li>
            You can log on to http://localhost:18080/nuxeo/ with Administrator/Administrator.
            <br />
            (If you meet the initial setup screen, then just choose the defaults and clicks 'Next' buttons.)
          </li>
        </ol>
      </div>

      
<div class="section">
<h3><a name="Build_CMIS_Replication_Demo_Application"></a>Build CMIS Replication Demo Application</h3>
        
<ol style="list-style-type: decimal">
          
<li>
            Check out http://forge.onehippo.org/svn/cmisreplication/cmisreplication/trunk. For example,
            <br />
            
<div>
<pre>$ svn checkout http://forge.onehippo.org/svn/cmisreplication/cmisreplication/trunk cmisreplication</pre></div>
          </li>
          
<li>
            Build with `mvn clean install'
          </li>
          
<li>
            Check out http://forge.onehippo.org/svn/cmisreplication/cmisreplication-demo/trunk. For example,
            <br />
            
<div>
<pre>$ svn checkout http://forge.onehippo.org/svn/cmisreplication/cmisreplication-demo/trunk cmisreplication-demo</pre></div>
          </li>
          
<li>
            Build with `mvn clean install'
          </li>
        </ol>
      </div>

      
<div class="section">
<h3><a name="Configure_CMIS_Repository_Source_and_HIPPO_Repository_Target"></a>Configure CMIS Repository Source and HIPPO Repository Target</h3>
        
<ol style="list-style-type: decimal">
          
<li>
            If you want to change configurations,
            please navigate to '/hippo:configuration/hippo:modules/cmisreplication-scheduler-module/hippo:moduleconfig'
            in CMS Console and edit properties. See <a href="install.html">Installation</a> page for detail.
          </li>
        </ol>
        
<p>
          <i>Note: cmis.replication.source.rootPath should be properly set to the existing Nuxeo workspace or section path.</i>
        </p>
      </div>

      
<div class="section">
<h3><a name="Start_CMS_and_SITE_Applications"></a>Start CMS and SITE Applications</h3>
        
<ol style="list-style-type: decimal">
          
<li>
           Start Tomcat with Cargo Plugin
           <br />
            
<div class="source"><pre>
$ mvn -P cargo.run
            </pre></div>
          </li>
        </ol>
      </div>

      
<div class="section">
<h3><a name="Testing"></a>Testing</h3>
        
<ol style="list-style-type: decimal">
          
<li>Create a workspace with any name. (e.g, 'testws') in Nuxeo DM Server</li>
          
<li>Create a section named 'marketing'.</li>
          
<li>Add some documents with file attachments into workspace and publish those into the 'marketing' section.</li>
          
<li>
            Check if those added binary files are shown in a Hippo Repository Asset folder within about 1 minute.
          </li>
          
<li>
            Open a document in CMS and add link(s) to asset(s).
          </li>
          
<li>
            Search documents and assets in the SITE application.
          </li>
        </ol>
        
<p>
          As you can see below, you need to add a workspace to add a file.
          <br />
          <img src="../images/1.02.xx/nuxscreen1.png" alt="Screenshot 1" style="BORDER: lightgrey solid 1px" />
        </p>
        
<p>
          After adding a file in a workspace, you need to publish the file to a section.
          <br />
          <img src="../images/1.02.xx/nuxscreen2.png" alt="Screenshot 2" style="BORDER: lightgrey solid 1px" />
        </p>
        
<p>
          Now you can see the document you published in your workspace as shown below.
          <br />
          <img src="../images/1.02.xx/nuxscreen3.png" alt="Screenshot 3" style="BORDER: lightgrey solid 1px" />
        </p>
        
<p>
          After about 1 minute, you may see the replicated documents in the specified assets folder
          from the Nuxeo DM Server to Hippo Repository.
          <br />
          <img src="../images/1.02.xx/nuxscreen4.png" alt="Screenshot 4" style="BORDER: lightgrey solid 1px" />
        </p>
        
<p>
          Now, you can search the asset documents by the contents in your website.
          <br />
          <img src="../images/1.02.xx/nuxscreen5.png" alt="Screenshot 5" style="BORDER: lightgrey solid 1px" />
        </p>
        
<p>
          <i>NOTE: </i>
          By default, the search component searches only non-asset documents. Also, its default template JSP page
          cannot deal with asset document beans.
          Therefore, the demo project contains custom component implementation and template JSP page to allow to search asset documents as well.
          See the following code for detail:
        </p>
        
<ul>
          
<li>http://forge.onehippo.org/svn/cmisreplication/cmisreplication-demo/trunk/site/src/main/java/org/onehippo/forge/cmisreplication/demo/components/Search.java</li>
          
<li>http://forge.onehippo.org/svn/cmisreplication/cmisreplication-demo/trunk/site/src/main/webapp/WEB-INF/jsp/search/main/content.jsp</li>
        </ul>
      </div>

      
<div class="section">
<h3><a name="References"></a>References</h3>
        
<ul>
          
<li><a class="externalLink" href="http://doc.nuxeo.com/display/NXDOC/CMIS+for+Nuxeo">CMIS for Nuxeo</a></li>
        </ul>
      </div>

    </div>
  

    </div>
    </div>
    </div>
    <hr/>
    <footer>
    <div class="container-fluid">
      <div class="row-fluid">
          <p class="copyright">Copyright &copy;      2018.
  BloomReach Inc. All rights reserved.
</p>
    </div>
            </div>
  </footer>
    </body>
</html>

